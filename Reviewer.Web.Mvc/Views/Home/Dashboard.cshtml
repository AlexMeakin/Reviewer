@model Reviewer.Web.Mvc.Controllers.MVC.DashboardModel

@{
    Layout = "~/Views/_MenuLayout.cshtml";
    ViewBag.Title = "Dashboard";
    ViewBag.ActionName = "Dashboard";
}

@section scripts{

    <script src="@Url.Content("~/Binding/ViewModels/DashboardViewModel.js")" type="text/javascript"></script>
}

@section css {}
@section JQueryOnReady{}


<div class="row">
    <div class="col-md-12">
        <div class="boxModule">
            <div class="boxModuleHeader" data-bind="loadingWhen: isCommandRunning, loaderClass: 'loader-dark'">
                @ViewBag.Title
            </div>
            <div id="content">
                <ul id="tabs" class="nav nav-tabs" data-tabs="tabs">
                    <li>
                        <a href="#dashboard" data-toggle="tab">&nbsp;<span class=" glyphicon glyphicon glyphicon-tasks"> &nbsp;</span> Dashboard</a>
                    </li>


                    <li class="active">
                        <a href="#counts" data-toggle="tab">&nbsp;<span class=" glyphicon glyphicon-eye-open"> &nbsp;</span> Table Counts Reports :</a>
                    </li>
                    <li>
                        <a href="#exports" data-toggle="tab">&nbsp;<span class=" glyphicon glyphicon-download-alt"> &nbsp;</span> DB Export Views</a>
                    </li>

                </ul>
                <div id="reports-tab-content" class="top-buffer tab-content">
                    @* Start Dashboard Content*@

                    <div class="tab-pane" id="dashboard">


                        <ul class="nav bth-nav">
                            <li>
                                <a data-toggle="dropdown" class="dropdown-toggle" href="#">
                                    <i class="icon-tasks"></i>
                                    <span class="badge  ">4</span>
                                </a>

                                <ul class="pull-right  dropdown-menu  dropdown-close">
                                    <li class="dropdown-header">
                                        <i class="icon-ok"></i>
                                        4 Tasks to complete
                                    </li>

                                    <li>
                                        <a href="#">
                                            <div class="clearfix">
                                                <span class="pull-left">Approve Cluster Approvers</span>
                                                <span class="pull-right">65%</span>
                                            </div>

                                            <div class="progress ">
                                                <div style="width: 65%" class="progress-bar "></div>
                                            </div>
                                        </a>
                                    </li>

                                    <li>
                                        <a href="#">
                                            <div class="clearfix">
                                                <span class="pull-left">Review Returns</span>
                                                <span class="pull-right">35%</span>
                                            </div>

                                            <div class="progress   ">
                                                <div style="width: 35%" class="progress-bar progress-bar-danger"></div>
                                            </div>
                                        </a>
                                    </li>


                                    <li>
                                        <a href="#">
                                            See tasks with details
                                            <i class="icon-arrow-right"></i>
                                        </a>
                                    </li>
                                </ul>
                            </li>

                            <li>
                                <a data-toggle="dropdown" class="dropdown-toggle" href="#">
                                    <i class="icon-bell-alt"></i>
                                    <span class="badge badge-important">2</span>
                                </a>

                                <ul class="pull-right dropdown-menu dropdown-close">
                                    <li class="dropdown-header">
                                        <i class="icon-warning-sign"></i>
                                        Notifications
                                    </li>

                                    <li>
                                        <a href="#">
                                            <div class="clearfix">
                                                <span class="pull-left">
                                                    <i class="btn btn-lg icon-exclamation-sign"></i>
                                                    Submitted records Rejected
                                                </span>
                                                <span class="pull-right badge badge-info">+2</span>
                                            </div>
                                        </a>
                                    </li>

                                    <li>
                                        <a href="#">
                                            See all notifications
                                            <i class="icon-arrow-right"></i>
                                        </a>
                                    </li>
                                </ul>
                            </li>

                            <li>
                                <a data-toggle="dropdown" class="dropdown-toggle" href="#">
                                    <i class="icon-envelope  "></i>
                                    <span class="badge badge-success">0</span>
                                </a>

                                <ul class="pull-right   dropdown-menu  dropdown-close">
                                    <li class="dropdown-header">
                                        <i class="icon-envelope-alt"></i>
                                        0 Messages
                                    </li>

                                </ul>
                            </li>
                        </ul>
                    </div>

                    @* Start Table Counts*@

                    <div class="tab-pane active" id="counts">

                        <div class="row">
                            <div class="col-md-6">
                                <div class="table-responsive">
                                    <table id="countsTable" class="table table-striped table-bordered table-hover">
                                        <thead>
                                        <tr>
                                            <th class="center">
                                                <label>
                                                    <span>&nbsp; <span class="glyphicon glyphicon-list-alt"></span>&nbsp;  Table Name</span>
                                                </label>
                                            </th>
                                            <th><span>&Sigma;(n)</span>&nbsp; Records Count</th>
                                        </tr>
                                        </thead>

                                        <tbody data-bind="foreach: tableCountsArray">
                                        <tr>
                                            <td>&nbsp; <span class="icon-table"></span>&nbsp;&nbsp;<span class="" data-bind="text: TableName "></span></td>
                                            <td>
                                                <span class="badge" data-bind="text: Rows"></span></td>
                                        </tr>
                                        </tbody>
                                    </table>
                                </div>
                                <!-- /.table-responsive -->
                            </div>
                        </div>
                    </div>

                    @*Start Export Views*@
                    <div class="tab-pane  col-md-12" id="exports">
                        <div class="pull-left">
                            <span class="label label-info">Table Name</span>
                            <div>
                                <select id="tableNameSel" style="width: 300px;" class="form-control" data-placeholder="Select Table name" data-bind="chosen: { chosenOption: { allow_single_deselect: true }, source: tableNames, selectedValue: selectedTable }"></select>
                            </div>
                        </div>

                        <div class="top-buffer row col-md-offset-4">
                            <button class="btn btn-primary btn-sm" data-bind="click: viewDataForTable, enable: selectedTable() !== undefined">View</button>
                        </div>
                        <br/>
                        <br/>

                        <div class="col-md-12 table-responsive">
                            <table id="gridM" class="pull-left table">
                                <tr>
                                    <td></td>
                                </tr>
                            </table>
                            <div id="pagerM"></div>
                            <br/>
                            <br/>
                        </div>

                    </div>
                    
                </div>
            </div>
        </div>
    </div>
</div>