var __extends=this.__extends||function(n,t){function r(){this.constructor=n}for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i]);r.prototype=t.prototype,n.prototype=new r},ViewModels;(function(n){var i=function(n){function i(t,i){n.call(this,t),this.SaveUrl=i}return __extends(i,n),i.prototype.OnResponse=function(i){var f=this,r=Enumerable.From(i.Results).Select(function(n){return new t(f.SaveUrl,n.CostCentreMappingId,n.CostCentre,n.RecoveryCostCentre)}).ToArray(),u=new t(this.SaveUrl,0,"","");u.OnSave=this.cb_OnCostCentreSave,r.push(u),i.Results=r,n.prototype.OnResponse.call(this,i)},i.prototype.OnCostCentreSave=function(n){if(n.CostCentreMappingId()==0){var i=new t(this.SaveUrl,0,"","");i.OnSave=this.cb_OnCostCentreSave,this.Results.push(i)}},i.prototype.cb_OnCostCentreSave=function(n){this.OnCostCentreSave(n)},i}(n.SearchViewModel),t;n.CostCentreMappingsViewModel=i,t=function(n){function t(t,i,r,u){var f=this;n.call(this),this.SaveUrl=t,this.CostCentreMappingId=ko.observable(i),this.CostCentre=ko.observable(r),this.RecoveryCostCentre=ko.observable(u),this.IsLoading=ko.observable(!1),this.IsEditing=ko.observable(i==0),this.IsUpdate=ko.computed(function(){if(f.CostCentreMappingId()!=0)return!0})}return __extends(t,n),t.prototype.Edit=function(){this.IsEditing(!0)},t.prototype.cb_Edit=function(){this.Edit()},t.prototype.Save=function(){var n=this,t;this.CostCentre().match(/[a-zA-Z]/)==null&&this.RecoveryCostCentre().match(/[a-zA-Z]/)==null?this.CostCentre().length!=5||this.RecoveryCostCentre().length!=5?alert("A cost centre or recovery cost centre should be 5 digits"):(t={CostCentreMappingId:this.CostCentreMappingId(),CostCentre:this.CostCentre(),RecoveryCostCentre:this.RecoveryCostCentre()},this.IsLoading(!0),$.ajax({type:"POST",url:this.SaveUrl,data:t,dataType:"json",traditional:!0,success:function(t){t.Exception!=null?alert(t.Exception):(n.OnSave!=null&&n.OnSave(n),n.CostCentreMappingId(t.CostCentreMappingId),n.IsEditing(!1)),n.IsLoading(!1)}})):alert("Invalid Entry, A Cost Centre or Recovery Cost Centre Must Not Be Alphanumeric!")},t.prototype.cb_Save=function(){this.Save()},t}(HasCallbacks),n.CostCentreMap=t})(ViewModels||(ViewModels={}))