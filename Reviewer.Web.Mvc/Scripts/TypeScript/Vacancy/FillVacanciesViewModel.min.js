var __extends=this.__extends||function(n,t){function r(){this.constructor=n}for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i]);r.prototype=t.prototype,n.prototype=new r},ViewModels;(function(n){var t=function(n){function t(t,i,r){var u=this;n.call(this,i),this.FillUri=t,this.Element=r,this.IsFilling=ko.observable(!1),this.Vacancy=ko.observable({}),this.Resource=ko.observable({}),this.ResourceName=ko.observable(""),this.StaffID=ko.observable(""),this.OrgUnit=ko.observable(""),this.CostCentre=ko.observable(""),this.FirstName=ko.observable(""),this.LastName=ko.observable(""),this.BRID=ko.observable(""),this.StaffNumber=ko.observable(""),this.ActualStartDate=ko.observable(new Date),this.CanFill=ko.computed(this.cb_ComputeCanFill),this.IsSAP=ko.computed(function(){return u.Vacancy()?u.Vacancy().IsSAP:!1})}return __extends(t,n),t.prototype.Clear=function(){this.IsFilling(!1),this.Vacancy({}),this.Resource({}),this.ResourceName(""),this.StaffID(""),this.OrgUnit(""),this.CostCentre(""),this.FirstName(""),this.LastName(""),this.BRID(""),this.StaffNumber(""),this.ActualStartDate(new Date)},t.prototype.Search=function(t){this.Resource({}),t.Name=this.ResourceName(),t.StaffID=this.StaffID(),t.OrganizationalUnit=this.OrgUnit(),t.CostCentre=this.CostCentre(),t.OnlyOrphan=!0,n.prototype.Search.call(this,t)},t.prototype.SelectResource=function(n){this.Resource(n)},t.prototype.cb_SelectResource=function(n){this.SelectResource(n)},t.prototype.Close=function(){$(this.Element).modal("hide")},t.prototype.cb_Close=function(){this.Close()},t.prototype.Fill=function(){var n=this,t;this.IsFilling(!0),t={vacancyId:this.Vacancy().VacancyId,resourceId:this.Resource().ResourceId,firstName:this.FirstName(),lastName:this.LastName(),BRID:this.BRID(),StaffNumber:this.StaffNumber(),ActualStartDate:this.ActualStartDate().getFullYear()+"-"+(this.ActualStartDate().getMonth()+1)+"-"+this.ActualStartDate().getDate()},$.ajax({type:"POST",url:this.FillUri,data:t,dataType:"json",traditional:!0,success:function(t){n.IsFilling(!1),t.Success?(alert("This vacancy has been filled."),n.Close(),n.OnFill!=null&&n.OnFill()):alert(t.Message)}})},t.prototype.cb_Fill=function(){this.Fill()},t.prototype.ComputeCanFill=function(){var n=this.Vacancy().VacancyId!=null,t=this.Resource().ResourceId!=null,i=this.IsFilling(),r=this.FirstName()!=""&&this.LastName()!=""&&this.BRID()!=""&&this.StaffNumber()!="";return i?!1:n?t||r?!0:!1:!1},t.prototype.cb_ComputeCanFill=function(){return this.ComputeCanFill()},t}(n.SearchViewModel);n.FillVacanciesViewModel=t})(ViewModels||(ViewModels={}))