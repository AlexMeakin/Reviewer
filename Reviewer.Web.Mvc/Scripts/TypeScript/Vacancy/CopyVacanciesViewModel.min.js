var __extends=this.__extends||function(n,t){function r(){this.constructor=n}for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i]);r.prototype=t.prototype,n.prototype=new r},ViewModels;(function(n){var t=function(n){function t(t,i,r){n.call(this),this.CopyUri=t,this.VacancyUri=i,this.Element=r,this.IsLoading=ko.observable(!1),this.Vacancies=ko.observableArray([]),this.CanCopy=ko.computed(this.cb_ComputeCanCopy)}return __extends(t,n),t.prototype.ComputeCanCopy=function(){var n=Enumerable.From(this.Vacancies()).Where(function(n){return n.CopyResult()==""}).Count();return n==0||this.IsLoading()?!1:!0},t.prototype.cb_ComputeCanCopy=function(){return this.ComputeCanCopy()},t.prototype.Copy=function(){var n=this,t=Enumerable.From(this.Vacancies()).Where(function(n){return n.CopyResult()==""}),i={vacancyIds:t.Select(function(n){return n.VacancyId}).ToArray()},r;this.IsLoading(!0),r=this,$.ajax({type:"POST",url:this.CopyUri,data:i,dataType:"json",traditional:!0,success:function(i){Enumerable.From(i.Results).ForEach(function(i){var r=t.First(function(n){return n.VacancyId==i.OriginalVacancyId});i.Errors==null||i.Errors.length==0?r.CopyResult('Vacancy copied succesfully.<br /><a class="btn" href="'+n.VacancyUri.format(i.NewVacancyId)+'">Open<\/a>'):r.CopyResult("Errors whilst copying."),n.IsLoading(!1),n.OnCopy!=null&&n.OnCopy()})}})},t.prototype.cb_Copy=function(){this.Copy()},t.prototype.Close=function(){$(this.Element).modal("hide")},t.prototype.cb_Close=function(){this.Close()},t}(HasCallbacks);n.CopyVacanciesViewModel=t})(ViewModels||(ViewModels={}))