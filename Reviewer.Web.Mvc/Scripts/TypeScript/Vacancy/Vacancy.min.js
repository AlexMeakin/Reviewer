var __extends=this.__extends||function(n,t){function i(){this.constructor=n}i.prototype=t.prototype,n.prototype=new i},ViewModels;(function(n){var t=function(n){function t(t){var i=this;n.call(this),this.Countries=ko.observableArray(),this.Sites=ko.observableArray(),this.DomicileCountrySiteList=ko.observableArray(),this.WorkLocationCountrySiteList=ko.observableArray(),this.DomicileCountry=ko.observable(""),this.DomicileCountry.subscribe(function(n){i.ChangeSiteList(n,i.DomicileCountrySiteList)}),this.WorkLocationCountry=ko.observable(""),this.WorkLocationCountry.subscribe(function(n){i.ChangeSiteList(n,i.WorkLocationCountrySiteList)}),this.DomicileSite=ko.observable(""),this.WorkLocationSite=ko.observable(""),this.SAPPositionNumber=ko.observable(""),this.StaffID=ko.observable(""),this.VacancyId=ko.observable(""),this.Url=t,this.HasResource=ko.computed(function(){return i.StaffID()!=""}),this.HasVacancyId=ko.computed(function(){return i.VacancyId()!=""}),this.NewComment=ko.observable(""),this.CanAddComment=ko.computed(this.cb_ComputeCanAddComment)}return __extends(t,n),t.prototype.ChangeSiteList=function(n,t){var i=Enumerable.From(this.Countries()).FirstOrDefault(null,function(t){return t.LookupValue==n}),r;i&&(r=Enumerable.From(this.Sites()).Where(function(n){return n.DependentLookupId==i.LookupId}).ToArray(),t(r))},t.prototype.Populate=function(n){var t=$.parseJSON(n);this.Countries(t.Countries),this.Sites(t.Sites)},t.prototype.AddComment=function(n){this.NewComment().length>0&&$.ajax({type:"POST",url:this.Url,data:{id:n,comment:this.NewComment()},dataType:"JSON",success:function(n){t.prototype.ClearComment(),$(".jsonComment").empty(),$.each(n.Comments,function(n,t){$(".jsonComment").append($("<tr><td>"+t.User+"<\/td><td>"))})}})},t.prototype.ClearComment=function(){this.NewComment=ko.observable(""),$(".commentInput").val("")},t.prototype.cb_ComputeCanAddComment=function(){return this.ComputeCanAddComment()},t.prototype.ComputeCanAddComment=function(){return this.NewComment()==""?!1:!0},t}(HasCallbacks);n.VacancyViewModel=t})(ViewModels||(ViewModels={}))