var __extends=this.__extends||function(n,t){function r(){this.constructor=n}for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i]);r.prototype=t.prototype,n.prototype=new r},ViewModels;(function(n){var i=function(i){function r(t,r,u,f){var e=this;i.call(this,t),this.SearchFiltersViewModel=new n.SearchFiltersViewModel(f.DomicileCountry,f.DomicileSite),this.SaveUri=r,this.SearchFormElement=u,this.Editing=new ko.observableArray,this.InOutStatus=ko.observable(),this.WorkLocationCountry=ko.observable(),this.WorkLocationSite=ko.observable(),this.ActualStartDate=ko.observable(),this.ActualExitDate=ko.observable(),this.ContractedHoursPerWeek=ko.observable(),this.UsualFTE=ko.observable(),this.Grade=ko.observable(),this.CostCentre=ko.observable(),this.MaxContractedHoursPerWeek=ko.observable(),this.Supplier=ko.observable(),this.Seconded=ko.observable(),this.RecoveryMethod=ko.observable(),this.PercentageChargeability=ko.observable(),this.UnitCostValue=ko.observable(),this.ContractEndDate=ko.observable(),this.PurchaseOrderNumber=ko.observable(),this.ResourceType=ko.observable(),this.RecruitmentStatus=ko.observable(),this.VacancyType=ko.observable(),this.PlannedStartDate=ko.observable(),this.PlannedExitDate=ko.observable(),this.SAPPositionNumber=ko.observable(),this.OrganisationalUnit=ko.observable(),this.LineManagerFirstName=ko.observable(),this.LineManagerLastName=ko.observable(),this.RoleTitle=ko.observable(),this.FunctionalTitle=ko.observable(),this.TechnologyRoleFamily=ko.observable(),this.ApplicationFocus=ko.observable(),this.ReasonForStarter=ko.observable(),this.TransferReason=ko.observable(),this.ReasonForLeaver=ko.observable(),this.ServiceType=ko.observable(),this.Status=ko.observable(),this.ReasonForGrowth=ko.observable(),this.CompanyStartDate=ko.observable(),this.InOutStatus.subscribe(function(n){e.UpdateChildren("InOutStatus",n)}),this.WorkLocationCountry.subscribe(function(n){e.UpdateChildren("WorkLocationCountry",n)}),this.WorkLocationSite.subscribe(function(n){e.UpdateChildren("WorkLocationSite",n)}),this.ActualStartDate.subscribe(function(n){e.UpdateChildren("ActualStartDate",n)}),this.ActualExitDate.subscribe(function(n){e.UpdateChildren("ActualExitDate",n)}),this.ContractedHoursPerWeek.subscribe(function(n){e.UpdateChildren("ContractedHoursPerWeek",n)}),this.UsualFTE.subscribe(function(n){e.UpdateChildren("UsualFTE",n)}),this.Grade.subscribe(function(n){e.UpdateChildren("Grade",n)}),this.CostCentre.subscribe(function(n){e.UpdateChildren("CostCentre",n)}),this.MaxContractedHoursPerWeek.subscribe(function(n){e.UpdateChildren("MaxContractedHoursPerWeek",n)}),this.Supplier.subscribe(function(n){e.UpdateChildren("Supplier",n)}),this.Seconded.subscribe(function(n){e.UpdateChildren("Seconded",n)}),this.RecoveryMethod.subscribe(function(n){e.UpdateChildren("RecoveryMethod",n)}),this.PercentageChargeability.subscribe(function(n){e.UpdateChildren("PercentageChargeability",n)}),this.UnitCostValue.subscribe(function(n){e.UpdateChildren("UnitCostValue",n)}),this.ContractEndDate.subscribe(function(n){e.UpdateChildren("ContractEndDate",n)}),this.PurchaseOrderNumber.subscribe(function(n){e.UpdateChildren("PurchaseOrderNumber",n)}),this.ResourceType.subscribe(function(n){e.UpdateChildren("ResourceType",n)}),this.RecruitmentStatus.subscribe(function(n){e.UpdateChildren("RecruitmentStatus",n)}),this.VacancyType.subscribe(function(n){e.UpdateChildren("VacancyType",n)}),this.PlannedStartDate.subscribe(function(n){e.UpdateChildren("PlannedStartDate",n)}),this.PlannedExitDate.subscribe(function(n){e.UpdateChildren("PlannedExitDate",n)}),this.SAPPositionNumber.subscribe(function(n){e.UpdateChildren("SAPPositionNumber",n)}),this.OrganisationalUnit.subscribe(function(n){e.UpdateChildren("OrganisationalUnit",n)}),this.LineManagerFirstName.subscribe(function(n){e.UpdateChildren("LineManagerFirstName",n)}),this.LineManagerLastName.subscribe(function(n){e.UpdateChildren("LineManagerLastName",n)}),this.RoleTitle.subscribe(function(n){e.UpdateChildren("RoleTitle",n)}),this.FunctionalTitle.subscribe(function(n){e.UpdateChildren("FunctionalTitle",n)}),this.TechnologyRoleFamily.subscribe(function(n){e.UpdateChildren("TechnologyRoleFamily",n)}),this.ApplicationFocus.subscribe(function(n){e.UpdateChildren("ApplicationFocus",n)}),this.ReasonForStarter.subscribe(function(n){e.UpdateChildren("ReasonForStarter",n)}),this.TransferReason.subscribe(function(n){e.UpdateChildren("TransferReason",n)}),this.ReasonForLeaver.subscribe(function(n){e.UpdateChildren("ReasonForLeaver",n)}),this.ServiceType.subscribe(function(n){e.UpdateChildren("ServiceType",n)}),this.Status.subscribe(function(n){e.UpdateChildren("Status",n)}),this.ReasonForGrowth.subscribe(function(n){e.UpdateChildren("ReasonForGrowth",n)}),this.CompanyStartDate.subscribe(function(n){e.UpdateChildren("CompanyStartDate",n)}),this.HasSearched=ko.observable(!1)}return __extends(r,i),r.prototype.UpdateChildren=function(n,t){this.Results().forEach(function(i){i[n](t)})},r.prototype.Search=function(n){this.HasSearched(!0),$(".collapsibleContainerTitle",$("#searchFiltersCollapsibleContainer")).trigger("click"),n==null&&(n={}),$.each($(this.SearchFormElement).serializeArray(),function(t,i){n[i.name]==null&&(n[i.name]=i.value)}),i.prototype.Search.call(this,n)},r.prototype.Revert=function(){this.Search({})},r.prototype.cb_Revert=function(){this.Revert()},r.prototype.OnResponse=function(n){for(var u=[],f,r=0;r<n.Results.length;r++)f=new t(n.Results[r]),u.push(f);n.Results=u,i.prototype.OnResponse.call(this,n)},r.prototype.Save=function(){var r=this,n=[],t,i;$.each(this.Results(),function(t,i){i.IsDirty&&(n.push(i.GetSaveRecord()),i.Saving(!0))}),t={Records:n},i=Enumerable.From(this.Results()),this.IsLoading(!0),$.ajax({type:"POST",url:this.SaveUri,data:"value="+encodeURIComponent(JSON.stringify(t)),traditional:!0,dataType:"JSON",success:function(n){var t=n.Results;$.each(t,function(n,t){var r=i.FirstOrDefault(null,function(n){return t.ResourceId!=null?n.ResourceId==t.ResourceId:t.VacancyId!=null?n.VacancyId==t.VacancyId:n.ResourceId==t.ResourceId||n.VacancyId==t.VacancyId});t.Success?(r.Editing([]),r.IsDirty=!1,r.IsError(!1)):(r.Errors=t.Errors,r.IsError(!0))}),r.IsLoading(!1)}})},r.prototype.cb_Save=function(){this.Save()},r.prototype.IsEditing=function(n){return this.Editing.indexOf(n)!=-1},r.prototype.cb_IsEditing=function(n){return this.IsEditing(n)},r.prototype.Edit=function(n){this.Editing.indexOf(n)==-1&&(this.Editing.push(n),this.Results().forEach(function(t){t.cb_Edit(n)}))},r.prototype.cb_Edit=function(n){this.Edit(n)},r}(n.SearchViewModel),t;n.BulkUpdateViewModel=i,t=function(n){function t(t){n.call(this),this.IsDirty=!1,this.Item=t,this.RoleId=t.RoleId,this.VacancyId=t.VacancyId,this.ResourceId=t.ResourceId,this.RoleStatus=t.RoleStatus,this.BRID=ko.observable(t.BRID),this.ResourceType=ko.observable(t.ResourceType),this.VacancyType=ko.observable(t.VacancyType),this.IsSAP=t.IsSAP,this.FirstName=ko.observable(t.FirstName),this.LastName=ko.observable(t.LastName),this.DomicileCountry=ko.observable(t.DomicileCountry),this.DomicileSite=ko.observable(t.DomicileSite),this.OnshoreOffshore=ko.observable(t.OnshoreOffshore),this.SupplierCategory=ko.observable(t.SupplierCategory),this.Supplier=ko.observable(t.Supplier),this.OrganisationalUnit=ko.observable(t.OrganisationalUnit),this.OrganisationalUnitId=ko.observable(t.OrganisationalUnitId),this.RoleTitle=ko.observable(t.RoleTitle),this.FunctionalTitle=ko.observable(t.FunctionalTitle),this.TechnologyRoleFamily=ko.observable(t.TechnologyRoleFamily),this.LineManagerFirstName=ko.observable(t.LineManagerFirstName),this.LineManagerLastName=ko.observable(t.LineManagerLastName),this.InOutStatus=ko.observable(t.InOutStatus),this.RecruitmentStatus=ko.observable(t.RecruitmentStatus),this.SanctionedReferenceNumber=ko.observable(t.SanctionedReferenceNumber),this.SanctionedDate=ko.observable(t.SanctionedDate),this.WorkLocationCountry=ko.observable(t.WorkLocationCountry),this.WorkLocationSite=ko.observable(t.WorkLocationSite),this.StaffId=ko.observable(t.StaffId),this.NavigatorId=ko.observable(t.NavigatorId),this.Grade=ko.observable(t.Grade),this.SAPPositionNumber=ko.observable(t.SAPPositionNumber),this.ServiceType=ko.observable(t.ServiceType),this.RecoveryMethod=ko.observable(t.RecoveryMethod),this.UnitCostValue=ko.observable(t.UnitCostValue),this.PercentageChargeability=ko.observable(t.PercentageChargeability),this.CostCentre=ko.observable(t.CostCentre),this.ContractedHoursPerWeek=ko.observable(t.ContractedHoursPerWeek),this.MaxContractedHoursPerWeek=ko.observable(t.MaxContractedHoursPerWeek),this.UsualFTE=ko.observable(t.UsualFTE),this.ReasonForStarter=ko.observable(t.ReasonForStarter),this.ReasonForLeaver=ko.observable(t.ReasonForLeaver),this.WFPStatus=ko.observable(t.WFPStatus),this.Seconded=ko.observable(t.Seconded),this.PurchaseOrderNumber=ko.observable(t.PurchaseOrderNumber),this.ApplicationFocus=ko.observable(t.ApplicationFocus),this.TransferReason=ko.observable(t.TransferReason),this.Status=ko.observable(t.Status),this.ReasonForGrowth=ko.observable(t.ReasonForGrowth),this.PlannedStartDate=ko.observable(),this.PlannedExitDate=ko.observable(),this.ActualStartDate=ko.observable(),this.ActualExitDate=ko.observable(),this.ContractEndDate=ko.observable(),this.CompanyStartDate=ko.observable(),t.PlannedStartDate&&(this.PlannedStartDate=ko.observable(this.DateFromISO(t.PlannedStartDate))),t.PlannedExitDate&&(this.PlannedExitDate=ko.observable(this.DateFromISO(t.PlannedExitDate))),t.ActualStartDate&&(this.ActualStartDate=ko.observable(this.DateFromISO(t.ActualStartDate))),t.ActualExitDate&&(this.ActualExitDate=ko.observable(this.DateFromISO(t.ActualExitDate))),t.ContractEndDate&&(this.ContractEndDate=ko.observable(this.DateFromISO(t.ContractEndDate))),t.CompanyStartDate&&(this.CompanyStartDate=ko.observable(this.DateFromISO(t.CompanyStartDate))),this.Editing=new ko.observableArray,this.Saving=new ko.observable(!1),this.IsError=new ko.observable(!1)}return __extends(t,n),t.prototype.DateFromISO=function(n){return Date.fromISO(n)},t.prototype.GetSaveRecord=function(){return{VacancyId:this.VacancyId,ResourceId:this.ResourceId,BRID:this.BRID(),ResourceType:this.ResourceType(),VacancyType:this.VacancyType(),IsSAP:this.IsSAP,FirstName:this.FirstName(),LastName:this.LastName(),DomicileCountry:this.DomicileCountry(),DomicileSite:this.DomicileSite(),OnshoreOffshore:this.OnshoreOffshore(),SupplierCategory:this.SupplierCategory(),Supplier:this.Supplier(),OrganisationalUnit:this.OrganisationalUnit(),OrganisationalUnitId:this.OrganisationalUnitId(),RoleTitle:this.RoleTitle(),FunctionalTitle:this.FunctionalTitle(),TechnologyRoleFamily:this.TechnologyRoleFamily(),LineManagerFirstName:this.LineManagerFirstName(),LineManagerLastName:this.LineManagerLastName(),InOutStatus:this.InOutStatus(),RecruitmentStatus:this.RecruitmentStatus(),SanctionedReferenceNumber:this.SanctionedReferenceNumber(),SanctionedDate:this.SanctionedDate(),WorkLocationCountry:this.WorkLocationCountry(),WorkLocationSite:this.WorkLocationSite(),StaffId:this.StaffId(),NavigatorId:this.NavigatorId(),Grade:this.Grade(),SAPPositionNumber:this.SAPPositionNumber(),ServiceType:this.ServiceType(),RecoveryMethod:this.RecoveryMethod(),UnitCostValue:this.UnitCostValue(),PercentageChargeability:this.PercentageChargeability(),CostCentre:this.CostCentre(),ContractedHoursPerWeek:this.ContractedHoursPerWeek(),MaxContractedHoursPerWeek:this.MaxContractedHoursPerWeek(),PlannedStartDate:this.PlannedStartDate(),PlannedExitDate:this.PlannedExitDate(),ActualStartDate:this.ActualStartDate(),ActualExitDate:this.ActualExitDate(),UsualFTE:this.UsualFTE(),ReasonForStarter:this.ReasonForStarter(),ReasonForLeaver:this.ReasonForLeaver(),WFPStatus:this.WFPStatus(),Seconded:this.Seconded(),ContractEndDate:this.ContractEndDate(),PurchaseOrderNumber:this.PurchaseOrderNumber(),ApplicationFocus:this.ApplicationFocus(),TransferReason:this.TransferReason(),Status:this.Status(),ReasonForGrowth:this.ReasonForGrowth(),CompanyStartDate:this.CompanyStartDate()}},t.prototype.IsEditing=function(n){return this.Editing.indexOf(n)!=-1},t.prototype.cb_IsEditing=function(n){return this.IsEditing(n)},t.prototype.Edit=function(n){this.Editing.indexOf(n)==-1&&(this.IsDirty=!0,this.Editing.push(n))},t.prototype.cb_Edit=function(n){this.Edit(n)},t.prototype.ShowErrors=function(){$.each(this.Errors,function(n,t){alert(t.ErrorMessage)})},t.prototype.cb_ShowErrors=function(){this.ShowErrors()},t}(HasCallbacks),n.BulkUpdateRecordViewModel=t})(ViewModels||(ViewModels={}))