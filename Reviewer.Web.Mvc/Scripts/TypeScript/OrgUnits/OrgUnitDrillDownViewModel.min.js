var __extends=this.__extends||function(n,t){function r(){this.constructor=n}for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i]);r.prototype=t.prototype,n.prototype=new r},ViewModels;(function(n){var t=function(n){function t(t,i){n.call(this),this.Element=t,this.OrganizationalUnits=new ko.observableArray,this.IsControlEnabled=ko.observable(!0),this.AllOrganizationalUnits=[],this.SelectedOrgUnit=ko.observable({Name:"root"}),this.DisplayNode=ko.observable(null),this.IsSelected=ko.observable(!1);var r=i;this.SetParents(r),this.DrillDown(r),this.ParentNode=r}return __extends(t,n),t.prototype.SelectOrgUnit=function(n){var t=Enumerable.From(this.AllOrganizationalUnits).FirstOrDefault(null,function(t){return t.Name==n});t!=null&&(this.SelectedOrgUnit(t),this.DrillDown(t.Parent))},t.prototype.SetParents=function(n){var t=this;this.AllOrganizationalUnits.push(n),$.each(n.Children,function(i,r){r.Parent=n,t.SetParents(r)})},t.prototype.SelectedNodeChanged=function(n){this.SelectedOrgUnit(n),this.IsSelected(n!=null),this.OnSelectedNodeChanged&&this.OnSelectedNodeChanged(n)},t.prototype.cb_Select=function(n){this.SelectedNodeChanged(n)},t.prototype.DrillDown=function(n){this.DisplayNode(n),this.OrganizationalUnits(n.Children),this.IsSelected(!1)},t.prototype.cb_DrillDown=function(n){this.DrillDown(n)},t.prototype.Back=function(){this.DrillDown(this.DisplayNode().Parent)},t.prototype.cb_Back=function(){this.Back()},t.prototype.EnableOrgUnitSelector=function(){this.Element.unblock(),this.IsControlEnabled(!0)},t.prototype.cb_EnableOrgUnitSelector=function(){return this.EnableOrgUnitSelector()},t.prototype.DisableOrgUnitSelector=function(){this.Element.block({message:null}),this.IsControlEnabled(!1)},t.prototype.cb_DisableOrgUnitSelector=function(){return this.DisableOrgUnitSelector()},t.prototype.ClearOrgUnitSelector=function(){this.SelectedOrgUnit(null),this.DrillDown(this.ParentNode)},t.prototype.cb_ClearOrgUnitSelector=function(){this.ClearOrgUnitSelector()},t}(HasCallbacks);n.OrgUnitDrillDownViewModel=t})(ViewModels||(ViewModels={}))