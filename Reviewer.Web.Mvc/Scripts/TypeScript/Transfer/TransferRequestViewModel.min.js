var __extends=this.__extends||function(n,t){function r(){this.constructor=n}for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i]);r.prototype=t.prototype,n.prototype=new r},ViewModels;(function(n){var t=function(n){function t(t,i){var r=this;n.call(this,t),this.CreateTransferUri=i,this.IsCreatingTransfer=ko.observable(!1),this.ReceiverOrgUnit=ko.observable(""),this.ReasonForTransfer=ko.observable(""),this.EffectiveFromDate=ko.observable(new Date),this.CanCreateTransfer=ko.computed(function(){return r.ReceiverOrgUnit()==""?!1:r.ReasonForTransfer()==""?!1:r.EffectiveFromDate()==null?!1:!0}),this.ResourceCount=ko.computed(function(){return Enumerable.From(r.Results()).Count(function(n){return n.IsSelected()})}),this.HasResources=ko.computed(function(){var n=Enumerable.From(r.Results()).Count(function(n){return n.IsSelected()});return n!=0}),this.ResourceFirstName=ko.observable(""),this.ResourceLastName=ko.observable(""),this.StaffID=ko.observable(""),this.OrgUnit=ko.observable(""),this.CostCentre=ko.observable("")}return __extends(t,n),t.prototype.CreateTransfer=function(){var n=this,t,i;this.IsCreatingTransfer(!0),t=Enumerable.From(this.Results()).Where(function(n){return n.IsSelected()}).Select(function(n){return n.ResourceId}).ToArray(),i={ResourceIds:t,ReasonForTransfer:this.ReasonForTransfer(),ReceiverOrganizationalUnit:this.ReceiverOrgUnit(),EffectiveFromDate:this.EffectiveFromDate().getFullYear()+"-"+(this.EffectiveFromDate().getMonth()+1)+"-"+this.EffectiveFromDate().getDate()},$.ajax({type:"POST",url:this.CreateTransferUri,data:i,dataType:"json",traditional:!0,success:function(t){t.Success&&n.Clear(),alert(t.Message),n.IsCreatingTransfer(!1)}})},t.prototype.cb_CreateTransfer=function(){this.CreateTransfer()},t.prototype.Clear=function(){this.ResourceFirstName(""),this.ResourceLastName(""),this.StaffID(""),this.OrgUnit(""),this.CostCentre(""),this.Results().forEach(function(n){n.IsSelected(!1)})},t.prototype.Search=function(t){t.FirstName=this.ResourceFirstName(),t.LastName=this.ResourceLastName(),t.StaffID=this.StaffID(),t.OrganizationalUnit=this.OrgUnit(),t.CostCentre=this.CostCentre(),n.prototype.Search.call(this,t)},t.prototype.OnResponse=function(t){t.Results.forEach(function(n){n.IsSelected=ko.observable(!1)}),n.prototype.OnResponse.call(this,t)},t.prototype.OnOrgUnitSelected=function(n){this.ReceiverOrgUnit(n.Name)},t.prototype.cb_OnOrgUnitSelected=function(n){this.OnOrgUnitSelected(n)},t}(n.SearchViewModel);n.TransferRequestViewModel=t})(ViewModels||(ViewModels={}))