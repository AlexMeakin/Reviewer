var __extends=this.__extends||function(n,t){function i(){this.constructor=n}i.prototype=t.prototype,n.prototype=new i},ViewModels;(function(n){var t=function(n){function t(t,i,r){n.call(this),this.SanctionUri=t,this.VacancyUri=i,this.Element=r,this.SapPositionNumber=ko.observable(""),this.PeoplePositionNumber=ko.observable(""),this.IsLoading=ko.observable(!1),this.Vacancies=ko.observableArray([]),this.CanSanction=ko.computed(this.cb_ComputeCanSanction)}return __extends(t,n),t.prototype.Clear=function(){this.IsLoading(!1),this.SapPositionNumber(""),this.PeoplePositionNumber("")},t.prototype.ComputeCanSanction=function(){return this.SapPositionNumber().length==8&&this.PeoplePositionNumber().length!=0?!0:!1},t.prototype.cb_ComputeCanSanction=function(){return this.ComputeCanSanction()},t.prototype.Sanction=function(){var n=this,t=Enumerable.From(this.Vacancies()).Where(function(n){return n.SanctionResult()==""}),i={vacancyId:t.Select(function(n){return n.VacancyId}).ToArray(),sapPositionNumber:this.SapPositionNumber(),sanctionedReferenceNumber:this.PeoplePositionNumber()};this.IsLoading(!0),$.ajax({type:"POST",url:this.SanctionUri,data:i,dataType:"json",traditional:!0,success:function(){n.IsLoading(!1),n.Close(),n.OnSanction!=null&&n.OnSanction(),alert("Vacancy has been sanctioned")}})},t.prototype.cb_Sanction=function(){this.Sanction()},t.prototype.Close=function(){$(this.Element).modal("hide")},t.prototype.cb_Close=function(){this.Close()},t}(HasCallbacks);n.SanctionVacancyViewModel=t})(ViewModels||(ViewModels={}))
